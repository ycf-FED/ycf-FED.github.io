<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<title>测试微信分享</title>
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no"/>
</head>
<body>

<h1>测试微信分享 - 2 </h1>
<img src="http://cdn6.jinxidao.com/uploads/active/images/coupons-12/200x200.jpg?v=2">

<script type="text/javascript">
var imgUrl = "http://cdn6.jinxidao.com/uploads/active/images/coupons-12/200x200.jpg";
var lineLink = "http://k-tools.cn/weixin-share.html";
var descContent = "要出发周边游给大家送福利啦！现在打开要出发APP即可领150元现金券，还在等什么，开抢啊!";
var shareTitle = "12月岁末大献礼，要出发周边游150元大礼包限时抢！";
var cancelShare = function(){
    alert("cancel");
}
var successShare = function(){
    alert("success");
}
</script>
<script type="text/javascript" src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
<script type="text/javascript">
wx.config({
    debug: true,
    appId: 'wxc9d060d3852a6ed2',
    timestamp: 1446085974,
    nonceStr: '3WZYTPz0wzc',
    signature: 'dfc1a016828988d4d7ceabcea077817801adb530',
    jsApiList: [
        'onMenuShareAppMessage',
        'onMenuShareTimeline'
    ]
});

wx.error(function(res){
    alert("error;")
});

wx.checkJsApi({
    jsApiList: ['onMenuShareAppMessage', 'onMenuShareTimeline'],
    success: function(res) {
        alert(res.checkResult.onMenuShareAppMessage);
        // 以键值对的形式返回，可用的api值true，不可用为false
        // 如：{"checkResult":{"chooseImage":true},"errMsg":"checkJsApi:ok"}
    }
});

// wx.ready(function(){
    wx.onMenuShareAppMessage({
        title: shareTitle,
        desc: descContent,
        link: lineLink,
        imgUrl: imgUrl,
        success: function(){
            successShare();
        },
        cancel: function(){
            cancelShare();
        }
    });
    // wx.onMenuShareTimeline({
    //     title: shareTitle,
    //     link: lineLink,
    //     imgUrl: imgUrl,
    //     success: function(){
    //         successShare();
    //     },
    //     cancel: function(){
    //         cancelShare();
    //     }
    // });
// });
</script>
</body>
</html>